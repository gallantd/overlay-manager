"use strict";var OverlayManager=function(a,b){return a&&"object"==typeof a?(this.zones=a[0].promos,this.adfree=b||!1,this.$window=$(window),this.$body=$("body"),void this.batting()):(this.logging("Data object has not been provided","error"),!1)};OverlayManager.prototype.FRAME_ID="OverlayFrame",OverlayManager.prototype.OVERLAY_ID="OverlayModal",OverlayManager.prototype.batting=function(){var a=this.overlayCheck();return"object"!=typeof a?(this.logging("no match provided","yarn"),!1):(this.setOptions(a),this.adFreeCheck()&&this.cookieStatus()&&this.createMask(),void this.setupListeners())},OverlayManager.prototype.defaults={cookieTime:1,cookieValue:"true",cookieName:"OverlayCookie",width:"100%",height:"100%",backgroundColor:"0,0,0",opacity:"0.8",onAdfree:!1,deferCookie:!1,currentUrl:window.location.href},OverlayManager.prototype.overlayCheck=function(){var a,b,c=this.zones,d=c.length;for(a=0;d>a;a++)if(c[a].parameters)if(c[a].parameters.includes){if(this.matchCheck(c[a].parameters.includes.split(","))){b=a;break}}else c[a].parameters.excludes&&this.matchCheck(c[a].parameters.excludes.split(","))||(b=a);else b=a;return void 0!==b?c[b]:!1},OverlayManager.prototype.matchCheck=function(a){var b,c,d;if(!a)return!1;for(c=a.length,d=this.defaults.currentUrl,b=0;c>b;b++)if(d.match(a[b]))return!0;return!1},OverlayManager.prototype.setOptions=function(a){return a?(this.options=$.extend(this.options,this.defaults,a.parameters),void(this.options.customIncludeUrl=a.customIncludeUrl)):(this.logging("No data options provided","error"),!1)},OverlayManager.prototype.adFreeCheck=function(){return this.adfree&&this.adfree!==this.options.onAdfree?!1:!0},OverlayManager.prototype.cookieStatus=function(){return this.options.deferCookie?(this.logging(this.options.cookieName+" cookie has been defered","warn"),!0):this.checkCookie()?void this.logging(this.options.cookieName+"cookie has already been set","warn"):this.setCookie()},OverlayManager.prototype.checkCookie=function(){var a,b=document.cookie.split(";"),c=b.length;for(a=0;c>a;a++)if(""!==b[a]&&b[a].indexOf(this.options.cookieName)>-1)return!0;return!1},OverlayManager.prototype.setCookie=function(){var a,b,c=new Date;return c.setTime(c.getTime()+24*this.options.cookieTime*60*60*1e3),a="expires="+c.toUTCString(),b=this.options.cookieName+"="+this.options.cookieValue+";"+a+";path=/",(document.cookie=b)?!0:!1},OverlayManager.prototype.createMask=function(){var a=document.createElement("div");a.id=this.OVERLAY_ID,a.className="overlayMask",a.style.position="fixed",a.style.backgroundColor="rgba("+this.options.backgroundColor+", "+this.options.opacity+")",a.style.border="none",a.style.width="100%",a.style.height="100%",a.style.top="0",a.style.left="0",a.style.textAlign="center",a.style.zIndex=2147483654,this.$body.append(a)&&(this.createClose(),this.createFrame())},OverlayManager.prototype.createClose=function(){var a={width:"35px",height:"35px",color:"white",background:"black","border-radius":"25px","text-decoration":"none",display:"block",font:"30px/1 Arial","font-weight":"Bold",position:"absolute",right:"1%",top:"2%",zIndex:"99999"};this.$body.find("#"+this.OVERLAY_ID).append($("<a>").attr("href","#").text("x").css(a).on("click",$.proxy(this.remove,this)))},OverlayManager.prototype.checkContents=function(){var a=this.options.customIncludeUrl.split(".");return a=a[a.length-1].toLowerCase(),"jpg"===a||"png"===a||"gif"===a?!0:!1},OverlayManager.prototype.createFrame=function(){var a=this.checkContents(),b=a?document.createElement("img"):document.createElement("iframe");b.id=this.FRAME_ID,b.style.width=this.options.width,b.style.height=this.options.height,b.style.backgroundColor="transparent",b.style.position="relative",b.style.border="none",b.style.zIndex=10,b.style.verticalAlign="center",b.allowTransparency="true",b.frameBorder=0,b.scrolling="no",b.src=this.options.customIncludeUrl,b.style.top="50%",b.style.marginTop="-"+parseInt(this.options.height,10)/2+"px",a&&this.options.link?this.$body.find("#"+this.OVERLAY_ID).append($("<a>").attr("href",this.options.link).append(b)).show():this.$body.find("#"+this.OVERLAY_ID).append(b).show()},OverlayManager.prototype.setupListeners=function(){var a=!0;return this.$body.hasClass("activeOverlay")&&(a=!1),this.$body.toggleClass("activeOverlay",!0),this.$window.bind("overlay.kill",$.proxy(this.remove,this)),a},OverlayManager.prototype.remove=function(){this.$body.hasClass("activeOverlay")&&(this.$body.toggleClass("activeOverlay",!1).find("#"+this.OVERLAY_ID).remove(),this.$window.unbind("overlay.kill"))},OverlayManager.prototype.logging=function(a,b){return console?void("object"!=typeof a?"error"===b?console.error("OverlayManager -> "+a):"warn"===b?console.warn("OverlayManager -> "+a):console.log("OverlayManager -> "+a):"error"===b?console.error("OverlayManager Obj-> ",a):"warn"===b?console.warn("OverlayManager Obj-> ",a):console.log("OverlayManager Obj-> ",a)):!1};